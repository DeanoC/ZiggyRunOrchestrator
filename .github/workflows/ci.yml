name: ci

on:
  pull_request:
  push:
    branches:
      - main

jobs:
  build-and-test:
    uses: DeanoC/ZiggySpiderweb/.github/workflows/ziggy-shared-ci.yml@main
    with:
      install_sqlite: true
      verify_script: |
        grep -q '\.name = \.ziggy_run_orchestrator' build.zig.zon
        grep -q 'ziggy_memory_store' build.zig.zon
        grep -q '\.hash =' build.zig.zon
